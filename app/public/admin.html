<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Magic Christmas Generator | OurXmas</title>
		<meta name="description" content="Create personalized interactive 3D Christmas experiences with hand gesture controls. Generate your own magical Christmas tree and share it with loved ones.">
		<meta name="keywords" content="Christmas generator, 3D Christmas tree, personalized Christmas, interactive, hand gestures, holiday gift, festive">
		<meta name="author" content="OurXmas">
		<meta name="robots" content="index, follow">
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website">
		<meta property="og:title" content="Magic Christmas Generator | OurXmas">
		<meta property="og:description" content="Create personalized interactive 3D Christmas experiences. Generate your own magical Christmas tree and share it with loved ones.">
		<meta property="og:image" content="https://ourxmas.pics/preview/generator.jpg">
		<meta property="og:url" content="https://ourxmas.pics">
		<meta property="og:site_name" content="OurXmas">
		
		<!-- Twitter -->
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:title" content="Magic Christmas Generator | OurXmas">
		<meta name="twitter:description" content="Create personalized interactive 3D Christmas experiences. Generate your own magical Christmas tree.">
		<meta name="twitter:image" content="https://ourxmas.pics/preview/generator.jpg">
		
		<!-- Theme Color -->
		<meta name="theme-color" content="#302b63">
		<meta name="msapplication-TileColor" content="#302b63">
		
		<!-- Favicon -->
		<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéÑ</text></svg>">
		
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
			rel="stylesheet" />
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}
			body {
				font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
					sans-serif;
				background: linear-gradient(
					135deg,
					#0f0c29 0%,
					#302b63 50%,
					#24243e 100%
				);
				color: #fff;
				min-height: 100vh;
				padding: 40px 20px;
			}
			.container {
				max-width: 720px;
				margin: 0 auto;
			}
			header {
				text-align: center;
				margin-bottom: 48px;
			}
			.logo {
				font-size: 4rem;
				margin-bottom: 16px;
				filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
			}
			h1 {
				font-size: 2.2rem;
				font-weight: 700;
				margin-bottom: 12px;
				background: linear-gradient(
					135deg,
					#ffd700 0%,
					#ff6b6b 50%,
					#ff69b4 100%
				);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				background-clip: text;
			}
			.subtitle {
				color: rgba(255, 255, 255, 0.6);
				font-size: 1rem;
			}
			.card {
				background: rgba(255, 255, 255, 0.03);
				border: 1px solid rgba(255, 255, 255, 0.08);
				border-radius: 16px;
				padding: 28px;
				margin-bottom: 24px;
				backdrop-filter: blur(20px);
				box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
			}
			.card-title {
				font-size: 0.85rem;
				font-weight: 600;
				text-transform: uppercase;
				letter-spacing: 1.5px;
				color: rgba(255, 215, 0, 0.9);
				margin-bottom: 24px;
				display: flex;
				align-items: center;
				gap: 10px;
			}
			.card-title::after {
				content: "";
				flex: 1;
				height: 1px;
				background: linear-gradient(90deg, rgba(255, 215, 0, 0.3), transparent);
			}
			.form-group {
				margin-bottom: 20px;
			}
			.form-group:last-child {
				margin-bottom: 0;
			}
			label {
				display: block;
				margin-bottom: 8px;
				font-weight: 500;
				color: rgba(255, 255, 255, 0.8);
				font-size: 0.9rem;
			}
			.label-hint {
				font-weight: 400;
				color: rgba(255, 255, 255, 0.4);
				font-size: 0.8rem;
				margin-left: 4px;
			}
			.input {
				width: 100%;
				padding: 14px 16px;
				border: 1px solid rgba(255, 255, 255, 0.1);
				border-radius: 10px;
				background: rgba(0, 0, 0, 0.2);
				color: #fff;
				font-family: inherit;
				font-size: 0.95rem;
				transition: all 0.2s;
			}
			.input:focus {
				outline: none;
				border-color: rgba(255, 215, 0, 0.5);
				box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);
			}
			.input::placeholder {
				color: rgba(255, 255, 255, 0.3);
			}
			.field-error {
				color: #ff6b6b;
				font-size: 0.8rem;
				margin-top: 6px;
				min-height: 18px;
			}
			.form-row {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 16px;
			}
			@media (max-width: 600px) {
				.form-row {
					grid-template-columns: 1fr;
				}
			}
			.drop-zone {
				border: 2px dashed rgba(255, 255, 255, 0.15);
				border-radius: 12px;
				padding: 40px 20px;
				text-align: center;
				cursor: pointer;
				transition: all 0.3s;
				background: rgba(0, 0, 0, 0.1);
			}
			.drop-zone:hover,
			.drop-zone.drag-over {
				border-color: rgba(255, 215, 0, 0.5);
				background: rgba(255, 215, 0, 0.05);
			}
			.drop-zone-small {
				padding: 20px;
			}
			.drop-zone-icon {
				font-size: 2.5rem;
				margin-bottom: 12px;
				opacity: 0.7;
			}
			.drop-zone-text {
				font-size: 0.95rem;
				color: rgba(255, 255, 255, 0.7);
				margin-bottom: 4px;
			}
			.drop-zone-hint {
				font-size: 0.8rem;
				color: rgba(255, 255, 255, 0.4);
			}
		</style>
	</head>
	<body>
		<div class="container">
			<header>
				<div class="logo">üéÑ</div>
				<h1>Magic Christmas Generator</h1>
				<p class="subtitle">
					Create personalized interactive 3D Christmas experiences
				</p>
			</header>

			<form id="generatorForm">
				<div class="card">
					<div class="card-title">üîó Your Custom Link</div>
					<div class="form-group">
						<label for="projectName"
							>Subdomain Name
							<span class="label-hint">(letters & numbers only)</span></label
						>
						<div class="input-with-button">
							<input
								type="text"
								id="projectName"
								name="projectName"
								class="input"
								placeholder="e.g., mychristmas2024"
								required
								pattern="[A-Za-z0-9]+" />
							<button
								type="button"
								class="btn-check"
								id="checkNameBtn"
								onclick="checkSubdomain()">
								Check
							</button>
						</div>
						<div class="field-error" id="projectNameError"></div>
						<div
							class="domain-preview"
							id="domainPreview"
							style="display: none">
							<span class="domain-available">‚úÖ This name is available! Your link will be:</span>
							<span class="domain-url" id="previewUrl"></span>
						</div>
					</div>
					<div class="example-links">
						<label class="example-label">üéÑ Preview Examples:</label>
						<div class="example-list">
							<a href="https://example1.ourxmas.pics" target="_blank" class="example-link">
								<span class="example-icon">üéÑ</span>
								<span class="example-url">example1.ourxmas.pics</span>
							</a>
							<a href="https://example2.ourxmas.pics" target="_blank" class="example-link">
								<span class="example-icon">üíú</span>
								<span class="example-url">example2.ourxmas.pics</span>
							</a>
							<a href="https://example3.ourxmas.pics" target="_blank" class="example-link">
								<span class="example-icon">‚ùÑÔ∏è</span>
								<span class="example-url">example3.ourxmas.pics</span>
							</a>
							<a href="https://example4.ourxmas.pics" target="_blank" class="example-link">
								<span class="example-icon">‚ú®</span>
								<span class="example-url">example4.ourxmas.pics</span>
							</a>
							<a href="https://example5.ourxmas.pics" target="_blank" class="example-link">
								<span class="example-icon">üåà</span>
								<span class="example-url">example5.ourxmas.pics</span>
							</a>
						</div>
					</div>
				</div>

				<div id="remainingForm" style="display: none">
					<div class="card">
						<div class="card-title">üñºÔ∏è Upload Images</div>
						<div class="form-group">
							<label
								>Ornament Images
								<span class="label-hint"
									>(5-15 required ‚Ä¢ PNG, JPG)</span
								></label
							>
							<div id="bodyImagesDropZone" class="drop-zone">
								<div class="drop-zone-icon">üìÅ</div>
								<div class="drop-zone-text">
									Drop images here or click to browse
								</div>
								<div class="drop-zone-hint">Maximum 5MB per file</div>
							</div>
							<input
								type="file"
								id="bodyImages"
								name="bodyImages"
								accept=".png,.jpg,.jpeg,image/png,image/jpeg"
								multiple
								style="display: none" />
							<div id="bodyPreview" class="preview-grid"></div>
							<div class="image-counter" id="imageCounter">0 / 15 images</div>
							<div class="field-error" id="bodyImagesError"></div>
						</div>
						<div class="form-group">
							<label for="youtubeUrl"
								>Background Music
								<span class="label-hint">(optional ‚Ä¢ YouTube URL)</span></label
							>
							<input
								type="text"
								id="youtubeUrl"
								name="youtubeUrl"
								class="input"
								placeholder="e.g., https://www.youtube.com/watch?v=VIDEO_ID" />
							<div class="youtube-hint">
								üéµ Paste a YouTube video URL for background music. If not it will use the default audio.
							</div>
							<div id="youtubePreview"></div>
							<div class="field-error" id="youtubeError"></div>
						</div>
					</div>

					<div class="card">
						<div class="card-title">‚ú® Customization</div>
						<div class="form-row">
							<div class="form-group">
								<label for="mainTitle">Main Title</label>
								<input
									type="text"
									id="mainTitle"
									name="mainTitle"
									class="input"
									value="MERRY CHRISTMAS" />
							</div>
							<div class="form-group">
								<label for="loveText">Message Text</label>
								<input
									type="text"
									id="loveText"
									name="loveText"
									class="input"
									value="I LOVE YOU ‚ù§Ô∏è" />
							</div>
						</div>
						<div class="form-group">
							<label>Tree Style</label>
							<div class="tree-selector">
								<label class="tree-option selected"
									><input
										type="radio"
										name="treeType"
										value="tree1"
										checked /><span class="tree-preview">üéÑ</span
									><span class="tree-name">Classic</span></label
								>
								<label class="tree-option"
									><input type="radio" name="treeType" value="tree2" /><span
										class="tree-preview"
										>üíú</span
									><span class="tree-name">Neon</span></label
								>
								<label class="tree-option"
									><input type="radio" name="treeType" value="tree3" /><span
										class="tree-preview"
										>‚ùÑÔ∏è</span
									><span class="tree-name">Snow</span></label
								>
								<label class="tree-option"
									><input type="radio" name="treeType" value="tree4" /><span
										class="tree-preview"
										>‚ú®</span
									><span class="tree-name">Golden</span></label
								>
								<label class="tree-option"
									><input type="radio" name="treeType" value="tree5" /><span
										class="tree-preview"
										>üåà</span
									><span class="tree-name">Rainbow</span></label
								>
							</div>
						</div>
					</div>

					<div class="card" id="paymentSection" style="display: none">
						<div class="card-title">üí≥ Payment</div>
						<div class="payment-content">
							<div class="sale-badge">üî• SALE OFF 70%</div>
							<p class="payment-original-price">99,000 VND</p>
							<p class="payment-amount">29,000 VND</p>
							<p class="sale-description">üéÑ Christmas Special Promotion - Limited Time Only!</p>
							<p class="payment-instruction">
								Scan QR code to complete payment
							</p>
							<div class="qr-container">
								<img id="qrCodeImage" src="" alt="Payment QR" />
							</div>
							<div id="paymentStatus" class="payment-status status-waiting">
								‚è≥ Waiting for payment...
							</div>
							<button
								type="button"
								class="btn-cancel"
								onclick="cancelPayment()">
								Cancel Payment
							</button>
						</div>
					</div>

					<input type="hidden" id="deployTo" name="deployTo" value="s3" />

					<div class="action-section">
						<button type="button" class="btn-reset" onclick="resetForm()">
							Reset
						</button>
						<button type="submit" class="btn-primary" id="submitBtn">
							<span class="btn-icon">üí≥</span> Proceed to Payment
						</button>
					</div>
				</div>
				<!-- End remainingForm -->

				<div
					id="progressSection"
					class="progress-section"
					style="display: none">
					<div class="progress-bar">
						<div class="progress-fill" id="progressFill"></div>
					</div>
					<div id="statusMessage" class="status-message"></div>
				</div>

				<div id="resultSection" class="result-section" style="display: none">
					<div class="result-icon">üéâ</div>
					<h3>Your Christmas Experience is Ready!</h3>
					<div class="result-url" id="resultUrl"></div>
					<button type="button" class="btn-copy" onclick="copyUrl()">
						üìã Copy URL
					</button>
				</div>
			</form>
		</div>

		<!-- Success Modal Popup -->
		<div id="successModal" class="modal-overlay" style="display: none">
			<div class="modal-content">
				<button type="button" class="modal-close" onclick="closeSuccessModal()">
					√ó
				</button>
				<div class="modal-icon">üéâ</div>
				<h2 class="modal-title">Your Christmas Experience is Ready!</h2>
				<p class="modal-subtitle">
					Share this magical link with your loved ones
				</p>
				<div class="modal-url" id="modalResultUrl"></div>
				<div class="modal-actions">
					<button type="button" class="btn-copy-modal" onclick="copyModalUrl()">
						üìã Copy URL
					</button>
					<button type="button" class="btn-visit" onclick="visitUrl()">
						üåê Visit Site
					</button>
				</div>
			</div>
		</div>

		<!-- Existing Domain Modal -->
		<div id="existingDomainModal" class="modal-overlay" style="display: none">
			<div class="modal-content modal-warning">
				<button
					type="button"
					class="modal-close"
					onclick="closeExistingDomainModal()">
					√ó
				</button>
				<div class="modal-icon">‚ö†Ô∏è</div>
				<h2 class="modal-title modal-title-warning">
					This subdomain already exists!
				</h2>
				<p class="modal-subtitle">
					Someone has already created a Christmas experience with this name
				</p>
				<div class="modal-url" id="existingDomainUrl"></div>
				<div class="modal-actions">
					<button
						type="button"
						class="btn-visit-existing"
						onclick="visitExistingDomain()">
						üåê Visit Existing Site
					</button>
					<button
						type="button"
						class="btn-try-another"
						onclick="closeExistingDomainModal()">
						Try Another Name
					</button>
				</div>
			</div>
		</div>

		<style>
			.preview-grid {
				display: grid;
				grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
				gap: 10px;
				margin-top: 16px;
			}
			.preview-item {
				position: relative;
				aspect-ratio: 1;
				border-radius: 8px;
				overflow: hidden;
				border: 1px solid rgba(255, 255, 255, 0.1);
			}
			.preview-item img {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}
			.preview-remove {
				position: absolute;
				top: 4px;
				right: 4px;
				width: 22px;
				height: 22px;
				background: rgba(255, 0, 0, 0.85);
				border: none;
				border-radius: 50%;
				color: #fff;
				font-size: 14px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				opacity: 0;
				transition: opacity 0.2s;
			}
			.preview-item:hover .preview-remove {
				opacity: 1;
			}
			.image-counter {
				font-size: 0.8rem;
				color: rgba(255, 255, 255, 0.5);
				margin-top: 8px;
				text-align: right;
			}
			.music-item {
				display: flex;
				align-items: center;
				justify-content: space-between;
				background: rgba(255, 255, 255, 0.05);
				padding: 12px 16px;
				border-radius: 8px;
				margin-top: 12px;
			}
			.music-item span {
				color: rgba(255, 255, 255, 0.8);
				font-size: 0.9rem;
			}
			.youtube-hint {
				font-size: 0.8rem;
				color: rgba(255, 255, 255, 0.5);
				margin-top: 8px;
			}
			.youtube-preview {
				margin-top: 12px;
				padding: 12px 16px;
				background: rgba(255, 0, 0, 0.1);
				border: 1px solid rgba(255, 0, 0, 0.3);
				border-radius: 8px;
				display: flex;
				align-items: center;
				gap: 10px;
			}
			.youtube-preview-icon {
				font-size: 1.5rem;
			}
			.youtube-preview-text {
				color: rgba(255, 255, 255, 0.8);
				font-size: 0.85rem;
				word-break: break-all;
			}
			.tree-selector {
				display: flex;
				gap: 10px;
				flex-wrap: wrap;
			}
			.tree-option {
				flex: 1;
				min-width: 80px;
				padding: 16px 12px;
				border: 1px solid rgba(255, 255, 255, 0.1);
				border-radius: 10px;
				text-align: center;
				cursor: pointer;
				transition: all 0.2s;
				background: rgba(0, 0, 0, 0.2);
			}
			.tree-option:hover {
				border-color: rgba(255, 215, 0, 0.3);
			}
			.tree-option.selected {
				border-color: #ffd700;
				background: rgba(255, 215, 0, 0.1);
			}
			.tree-option input {
				display: none;
			}
			.tree-preview {
				font-size: 1.8rem;
				display: block;
				margin-bottom: 6px;
			}
			.tree-name {
				font-size: 0.75rem;
				color: rgba(255, 255, 255, 0.6);
			}
			.action-section {
				display: flex;
				gap: 12px;
				justify-content: center;
				margin-top: 32px;
			}
			.btn-primary {
				flex: 1;
				max-width: 280px;
				padding: 16px 32px;
				border: none;
				border-radius: 12px;
				background: linear-gradient(135deg, #ffd700, #ffa500);
				color: #000;
				font-size: 1rem;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.3s;
				display: flex;
				align-items: center;
				justify-content: center;
				gap: 8px;
			}
			.btn-primary:hover {
				transform: translateY(-2px);
				box-shadow: 0 8px 24px rgba(255, 215, 0, 0.4);
			}
			.btn-primary:disabled {
				opacity: 0.5;
				cursor: not-allowed;
				transform: none;
			}
			.btn-reset {
				padding: 16px 24px;
				border: 1px solid rgba(255, 255, 255, 0.2);
				border-radius: 12px;
				background: transparent;
				color: rgba(255, 255, 255, 0.7);
				font-size: 0.95rem;
				font-weight: 500;
				cursor: pointer;
				transition: all 0.2s;
			}
			.btn-reset:hover {
				border-color: rgba(255, 255, 255, 0.4);
				color: #fff;
			}

			/* Input with button styles */
			.input-with-button {
				display: flex;
				gap: 12px;
			}
			.input-with-button .input {
				flex: 1;
			}
			.btn-check {
				padding: 14px 24px;
				border: none;
				border-radius: 10px;
				background: linear-gradient(135deg, #667eea, #764ba2);
				color: #fff;
				font-size: 0.95rem;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.2s;
				white-space: nowrap;
			}
			.btn-check:hover {
				transform: translateY(-2px);
				box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);
			}
			.btn-check:disabled {
				opacity: 0.5;
				cursor: not-allowed;
				transform: none;
			}
			.domain-preview {
				margin-top: 12px;
				padding: 12px 16px;
				background: rgba(74, 222, 128, 0.1);
				border: 1px solid rgba(74, 222, 128, 0.3);
				border-radius: 8px;
				display: flex;
				flex-direction: column;
				align-items: flex-start;
				gap: 6px;
				overflow: hidden;
				width: 100%;
				box-sizing: border-box;
			}
			.domain-available {
				color: #4ade80;
				font-weight: 500;
				font-size: 0.9rem;
				word-wrap: break-word;
				overflow-wrap: break-word;
				width: 100%;
			}
			.domain-url {
				color: #4ade80;
				font-family: "SF Mono", Monaco, monospace;
				font-size: 0.9rem;
				word-break: break-all;
				overflow-wrap: break-word;
				width: 100%;
				max-width: 100%;
			}
			@media (max-width: 480px) {
				.domain-preview {
					padding: 10px 12px;
				}
				.domain-available {
					font-size: 0.85rem;
				}
				.domain-url {
					font-size: 0.8rem;
				}
			}
			
			/* Example links styles */
			.example-links {
				margin-top: 20px;
				padding-top: 16px;
				border-top: 1px solid rgba(255, 255, 255, 0.08);
			}
			.example-label {
				display: block;
				font-size: 0.85rem;
				color: rgba(255, 255, 255, 0.6);
				margin-bottom: 12px;
			}
			.example-list {
				display: flex;
				flex-wrap: wrap;
				gap: 8px;
			}
			.example-link {
				display: inline-flex;
				align-items: center;
				gap: 6px;
				padding: 8px 12px;
				background: rgba(255, 255, 255, 0.05);
				border: 1px solid rgba(255, 255, 255, 0.1);
				border-radius: 8px;
				text-decoration: none;
				transition: all 0.2s;
			}
			.example-link:hover {
				background: rgba(255, 215, 0, 0.1);
				border-color: rgba(255, 215, 0, 0.3);
				transform: translateY(-2px);
			}
			.example-icon {
				font-size: 1rem;
			}
			.example-url {
				font-family: "SF Mono", Monaco, monospace;
				font-size: 0.75rem;
				color: rgba(255, 255, 255, 0.7);
			}
			.example-link:hover .example-url {
				color: #ffd700;
			}
			@media (max-width: 600px) {
				.example-list {
					flex-direction: column;
				}
				.example-link {
					justify-content: center;
				}
			}
		</style>

		<style>
			.payment-content {
				text-align: center;
				padding: 20px 0;
			}
			.sale-badge {
				display: inline-block;
				background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%);
				color: #fff;
				padding: 8px 20px;
				border-radius: 20px;
				font-weight: 700;
				font-size: 1.1rem;
				margin-bottom: 12px;
				animation: pulse 1.5s ease-in-out infinite;
				box-shadow: 0 4px 15px rgba(255, 68, 68, 0.4);
			}
			@keyframes pulse {
				0%, 100% { transform: scale(1); }
				50% { transform: scale(1.05); }
			}
			.payment-original-price {
				font-size: 1.2rem;
				color: rgba(255, 255, 255, 0.5);
				text-decoration: line-through;
				margin-bottom: 4px;
			}
			.payment-amount {
				font-size: 2.5rem;
				font-weight: 700;
				color: #00ff88;
				margin-bottom: 8px;
				text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
			}
			.sale-description {
				color: #ff69b4;
				font-size: 0.95rem;
				margin-bottom: 16px;
				font-weight: 500;
			}
			.payment-instruction {
				color: rgba(255, 255, 255, 0.6);
				margin-bottom: 20px;
			}
			.payment-transfer {
				display: inline-flex;
				align-items: center;
				gap: 10px;
				background: rgba(0, 0, 0, 0.3);
				padding: 10px 16px;
				border-radius: 8px;
				margin-bottom: 20px;
			}
			.payment-transfer span {
				color: rgba(255, 255, 255, 0.5);
				font-size: 0.85rem;
			}
			.payment-transfer code {
				color: #ff69b4;
				font-size: 1rem;
				font-weight: 600;
			}
			.btn-copy-small {
				padding: 4px 10px;
				border: 1px solid rgba(255, 105, 180, 0.5);
				border-radius: 4px;
				background: transparent;
				color: #ff69b4;
				font-size: 0.75rem;
				cursor: pointer;
			}
			.qr-container {
				background: #fff;
				padding: 16px;
				border-radius: 12px;
				display: inline-block;
				margin-bottom: 20px;
			}
			.qr-container img {
				max-width: 220px;
				height: auto;
				display: block;
			}
			.payment-status {
				padding: 12px 20px;
				border-radius: 8px;
				font-size: 0.9rem;
			}
			.status-waiting {
				background: rgba(255, 215, 0, 0.1);
				color: #ffd700;
			}
			.status-success {
				background: rgba(0, 255, 0, 0.1);
				color: #4ade80;
			}
			.status-error {
				background: rgba(255, 0, 0, 0.1);
				color: #ff6b6b;
			}
			.btn-cancel {
				margin-top: 16px;
				padding: 10px 24px;
				border: 1px solid rgba(255, 100, 100, 0.4);
				border-radius: 8px;
				background: transparent;
				color: #ff6b6b;
				font-size: 0.9rem;
				cursor: pointer;
			}
			.progress-section {
				margin-top: 24px;
			}
			.progress-bar {
				width: 100%;
				height: 6px;
				background: rgba(255, 255, 255, 0.1);
				border-radius: 3px;
				overflow: hidden;
				margin-bottom: 12px;
			}
			.progress-fill {
				height: 100%;
				width: 0%;
				border-radius: 3px;
				background: linear-gradient(90deg, #ffd700, #ff69b4);
				transition: width 0.3s;
			}
			.status-message {
				padding: 12px 16px;
				border-radius: 8px;
				font-size: 0.9rem;
				text-align: center;
			}
			.result-section {
				background: rgba(74, 222, 128, 0.05);
				border: 1px solid rgba(74, 222, 128, 0.2);
				border-radius: 16px;
				padding: 32px;
				margin-top: 24px;
				text-align: center;
			}
			.result-icon {
				font-size: 3rem;
				margin-bottom: 16px;
			}
			.result-section h3 {
				color: #4ade80;
				font-size: 1.2rem;
				margin-bottom: 16px;
			}
			.result-url {
				background: rgba(0, 0, 0, 0.3);
				padding: 14px 18px;
				border-radius: 8px;
				font-family: "SF Mono", Monaco, monospace;
				font-size: 0.85rem;
				word-break: break-all;
				margin-bottom: 16px;
				color: rgba(255, 255, 255, 0.9);
			}
			.btn-copy {
				padding: 12px 24px;
				border: none;
				border-radius: 8px;
				background: #4ade80;
				color: #000;
				font-weight: 600;
				cursor: pointer;
			}

			/* Success Modal Styles */
			.modal-overlay {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.8);
				backdrop-filter: blur(8px);
				display: flex;
				align-items: center;
				justify-content: center;
				z-index: 1000;
				animation: fadeIn 0.3s ease;
			}
			@keyframes fadeIn {
				from {
					opacity: 0;
				}
				to {
					opacity: 1;
				}
			}
			@keyframes slideUp {
				from {
					transform: translateY(30px);
					opacity: 0;
				}
				to {
					transform: translateY(0);
					opacity: 1;
				}
			}
			.modal-content {
				background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
				border: 1px solid rgba(74, 222, 128, 0.3);
				border-radius: 24px;
				padding: 40px;
				max-width: 500px;
				width: 90%;
				text-align: center;
				position: relative;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
					0 0 40px rgba(74, 222, 128, 0.1);
				animation: slideUp 0.4s ease;
			}
			.modal-close {
				position: absolute;
				top: 16px;
				right: 16px;
				width: 32px;
				height: 32px;
				border: none;
				background: rgba(255, 255, 255, 0.1);
				color: rgba(255, 255, 255, 0.6);
				border-radius: 50%;
				font-size: 20px;
				cursor: pointer;
				transition: all 0.2s;
			}
			.modal-close:hover {
				background: rgba(255, 255, 255, 0.2);
				color: #fff;
			}
			.modal-icon {
				font-size: 4rem;
				margin-bottom: 16px;
				animation: bounce 0.6s ease;
			}
			@keyframes bounce {
				0%,
				100% {
					transform: scale(1);
				}
				50% {
					transform: scale(1.2);
				}
			}
			.modal-title {
				font-size: 1.5rem;
				font-weight: 700;
				color: #4ade80;
				margin-bottom: 8px;
			}
			.modal-subtitle {
				color: rgba(255, 255, 255, 0.6);
				font-size: 0.95rem;
				margin-bottom: 24px;
			}
			.modal-url {
				background: rgba(0, 0, 0, 0.4);
				padding: 16px 20px;
				border-radius: 12px;
				font-family: "SF Mono", Monaco, monospace;
				font-size: 0.9rem;
				word-break: break-all;
				margin-bottom: 24px;
				color: #4ade80;
				border: 1px solid rgba(74, 222, 128, 0.2);
			}
			.modal-actions {
				display: flex;
				gap: 12px;
				justify-content: center;
			}
			.btn-copy-modal {
				padding: 14px 28px;
				border: none;
				border-radius: 10px;
				background: #4ade80;
				color: #000;
				font-weight: 600;
				font-size: 0.95rem;
				cursor: pointer;
				transition: all 0.2s;
			}
			.btn-copy-modal:hover {
				transform: translateY(-2px);
				box-shadow: 0 4px 16px rgba(74, 222, 128, 0.4);
			}
			.btn-visit {
				padding: 14px 28px;
				border: 1px solid rgba(255, 255, 255, 0.2);
				border-radius: 10px;
				background: transparent;
				color: #fff;
				font-weight: 600;
				font-size: 0.95rem;
				cursor: pointer;
				transition: all 0.2s;
			}
			.btn-visit:hover {
				border-color: rgba(255, 255, 255, 0.4);
				background: rgba(255, 255, 255, 0.05);
			}

			/* Warning modal styles */
			.modal-warning {
				border-color: rgba(251, 191, 36, 0.3);
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
					0 0 40px rgba(251, 191, 36, 0.1);
			}
			.modal-title-warning {
				color: #fbbf24 !important;
			}
			.btn-visit-existing {
				padding: 14px 28px;
				border: none;
				border-radius: 10px;
				background: linear-gradient(135deg, #667eea, #764ba2);
				color: #fff;
				font-weight: 600;
				font-size: 0.95rem;
				cursor: pointer;
				transition: all 0.2s;
			}
			.btn-visit-existing:hover {
				transform: translateY(-2px);
				box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4);
			}
			.btn-try-another {
				padding: 14px 28px;
				border: 1px solid rgba(255, 255, 255, 0.2);
				border-radius: 10px;
				background: transparent;
				color: #fff;
				font-weight: 600;
				font-size: 0.95rem;
				cursor: pointer;
				transition: all 0.2s;
			}
			.btn-try-another:hover {
				border-color: rgba(255, 255, 255, 0.4);
				background: rgba(255, 255, 255, 0.05);
			}
		</style>

		<script>
			var form = document.getElementById("generatorForm");
			var bodyImagesInput = document.getElementById("bodyImages");

			var MAX_FILE_SIZE = 5 * 1024 * 1024;
			var MIN_IMAGES = 5;
			var MAX_IMAGES = 15;
			var MAX_NAME_LEN = 63;
			var NAME_RE = /^[A-Za-z0-9]+$/;
			var IMG_EXT = [".png", ".jpg", ".jpeg"];
			var IMG_MIME = ["image/png", "image/jpeg"];

			var accumulatedImages = [];
			var pollTimer = null;
			var pollTimeoutTimer = null;
			var pollStartTime = null;
			var PAYMENT_AMOUNT = 29000;
			var POLL_INTERVAL = 3000;
			var POLL_TIMEOUT = 10 * 60 * 1000;
			var SEPAY_ACCOUNT = "96247QTKN";
			var SEPAY_BANK = "BIDV";
			var SEPAY_TEMPLATE = "compact";
			var SEPAY_BRID = "19mN62fT_sS4GCXWrxpohg";
			var DOMAIN = "ourxmas.pics";
			var BACKEND_URL = "https://chrismas-unicorn-production.up.railway.app";

			function showError(id, msg) {
				var el = document.getElementById(id + "Error");
				if (el) el.textContent = msg;
			}
			function clearError(id) {
				var el = document.getElementById(id + "Error");
				if (el) el.textContent = "";
			}
			function clearAllErrors() {
				["projectName", "bodyImages", "youtube"].forEach(clearError);
			}

			function validateName(n) {
				if (!n || !n.trim())
					return { ok: false, err: "Project name is required" };
				if (!NAME_RE.test(n))
					return { ok: false, err: "Only letters and numbers allowed" };
				if (n.length > MAX_NAME_LEN)
					return { ok: false, err: "Max " + MAX_NAME_LEN + " characters" };
				return { ok: true };
			}

			function validateImage(f) {
				var ext = "." + f.name.split(".").pop().toLowerCase();
				if (IMG_EXT.indexOf(ext) === -1 && IMG_MIME.indexOf(f.type) === -1)
					return {
						ok: false,
						err: "Invalid type: " + f.name + ". Use PNG or JPG",
					};
				if (f.size > MAX_FILE_SIZE)
					return { ok: false, err: f.name + " exceeds 5MB" };
				return { ok: true };
			}

			function extractYouTubeId(url) {
				if (!url) return null;
				var patterns = [
					/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,
					/^([a-zA-Z0-9_-]{11})$/
				];
				for (var i = 0; i < patterns.length; i++) {
					var match = url.match(patterns[i]);
					if (match) return match[1];
				}
				return null;
			}

			function validateYouTubeUrl(url) {
				if (!url || !url.trim()) return { ok: true, videoId: null }; // Optional field
				var videoId = extractYouTubeId(url);
				if (!videoId) {
					return { ok: false, err: "Invalid YouTube URL. Please use a valid YouTube video link." };
				}
				return { ok: true, videoId: videoId };
			}

			function updateCounter() {
				document.getElementById("imageCounter").textContent =
					accumulatedImages.length + " / " + MAX_IMAGES + " images";
			}

			function renderPreviews() {
				var grid = document.getElementById("bodyPreview");
				grid.innerHTML = "";
				for (var i = 0; i < accumulatedImages.length; i++) {
					(function (index) {
						var file = accumulatedImages[index];
						var div = document.createElement("div");
						div.className = "preview-item";
						var img = document.createElement("img");
						img.src = URL.createObjectURL(file);
						var btn = document.createElement("button");
						btn.type = "button";
						btn.className = "preview-remove";
						btn.innerHTML = "√ó";
						btn.onclick = function () {
							accumulatedImages.splice(index, 1);
							renderPreviews();
							updateCounter();
							clearError("bodyImages");
						};
						div.appendChild(img);
						div.appendChild(btn);
						grid.appendChild(div);
					})(i);
				}
				updateCounter();
			}

			function processImages(files, append) {
				clearError("bodyImages");
				var valid = [];
				for (var i = 0; i < files.length; i++) {
					var v = validateImage(files[i]);
					if (!v.ok) {
						showError("bodyImages", v.err);
						return;
					}
					valid.push(files[i]);
				}
				if (append) {
					accumulatedImages = accumulatedImages.concat(valid);
				} else {
					accumulatedImages = valid;
				}
				if (accumulatedImages.length > MAX_IMAGES) {
					accumulatedImages = accumulatedImages.slice(0, MAX_IMAGES);
					showError(
						"bodyImages",
						"Max " + MAX_IMAGES + " images. Extra removed."
					);
				}
				renderPreviews();
			}

			// Drop zone handlers
			var bodyDropZone = document.getElementById("bodyImagesDropZone");

			bodyDropZone.ondragover = function (e) {
				e.preventDefault();
				bodyDropZone.classList.add("drag-over");
			};
			bodyDropZone.ondragleave = function (e) {
				e.preventDefault();
				bodyDropZone.classList.remove("drag-over");
			};
			bodyDropZone.ondrop = function (e) {
				e.preventDefault();
				bodyDropZone.classList.remove("drag-over");
				processImages(Array.prototype.slice.call(e.dataTransfer.files), true);
			};
			bodyDropZone.onclick = function () {
				bodyImagesInput.click();
			};
			bodyImagesInput.onchange = function (e) {
				processImages(Array.prototype.slice.call(e.target.files), true);
			};

			// YouTube URL input handler
			var youtubeInput = document.getElementById("youtubeUrl");
			youtubeInput.oninput = function (e) {
				clearError("youtube");
				var url = e.target.value.trim();
				var preview = document.getElementById("youtubePreview");
				
				if (!url) {
					preview.innerHTML = "";
					return;
				}
				
				var result = validateYouTubeUrl(url);
				if (!result.ok) {
					showError("youtube", result.err);
					preview.innerHTML = "";
				} else if (result.videoId) {
					preview.innerHTML = '<div class="youtube-preview">' +
						'<span class="youtube-preview-icon">‚ñ∂Ô∏è</span>' +
						'<span class="youtube-preview-text">YouTube Video ID: ' + result.videoId + '</span>' +
						'</div>';
				}
			};

			// Tree selector
			var treeOptions = document.querySelectorAll(".tree-option");
			for (var i = 0; i < treeOptions.length; i++) {
				(function (opt) {
					opt.onclick = function () {
						for (var j = 0; j < treeOptions.length; j++)
							treeOptions[j].classList.remove("selected");
						opt.classList.add("selected");
						opt.querySelector("input").checked = true;
					};
				})(treeOptions[i]);
			}

			// Project name validation
			document.getElementById("projectName").oninput = function (e) {
				var v = validateName(e.target.value);
				if (!v.ok && e.target.value) showError("projectName", v.err);
				else clearError("projectName");
				// Hide preview and remaining form when name changes
				document.getElementById("domainPreview").style.display = "none";
				document.getElementById("remainingForm").style.display = "none";
			};

			// Handle Enter key in project name input - trigger Check instead of form submit
			document.getElementById("projectName").onkeypress = function (e) {
				if (e.key === "Enter") {
					e.preventDefault();
					checkSubdomain();
				}
			};

			// Check subdomain availability
			function checkSubdomain() {
				var name = document.getElementById("projectName").value.trim();
				var v = validateName(name);
				if (!v.ok) {
					showError("projectName", v.err);
					return;
				}
				clearError("projectName");

				var btn = document.getElementById("checkNameBtn");
				btn.disabled = true;
				btn.textContent = "Checking...";

				fetch(BACKEND_URL + "/api/project/check/" + encodeURIComponent(name), {
					headers: {
						Accept: "application/json",
					},
				})
					.then(function (res) {
						return res.json();
					})
					.then(function (data) {
						btn.disabled = false;
						btn.textContent = "Check";

						if (data.exists) {
							// Show modal with existing URL
							showExistingDomainModal(data.url);
							document.getElementById("domainPreview").style.display = "none";
							document.getElementById("remainingForm").style.display = "none";
						} else {
							// Show preview and unhide remaining form
							var previewUrl = "https://" + name.toLowerCase() + "." + DOMAIN;
							document.getElementById("previewUrl").textContent = previewUrl;
							document.getElementById("domainPreview").style.display = "flex";
							document.getElementById("remainingForm").style.display = "block";
						}
					})
					.catch(function (err) {
						btn.disabled = false;
						btn.textContent = "Check";
						showError(
							"projectName",
							"Error checking availability: " + err.message
						);
					});
			}

			function showExistingDomainModal(url) {
				document.getElementById("existingDomainUrl").textContent = url;
				document.getElementById("existingDomainModal").style.display = "flex";
			}

			function closeExistingDomainModal() {
				document.getElementById("existingDomainModal").style.display = "none";
			}

			function visitExistingDomain() {
				var url = document.getElementById("existingDomainUrl").textContent;
				window.open(url, "_blank");
			}

			function showMessage(msg, type) {
				var el = document.getElementById("statusMessage");
				el.textContent = msg;
				el.className = "status-message status-" + type;
				document.getElementById("progressSection").style.display = "block";
			}

			function updateProgress(p) {
				document.getElementById("progressFill").style.width = p + "%";
			}

			function generateQRUrl(name) {
				return (
					"https://qr.sepay.vn/img?acc=" +
					SEPAY_ACCOUNT +
					"&bank=" +
					SEPAY_BANK +
					"&amount=" +
					PAYMENT_AMOUNT +
					"&des=" +
					encodeURIComponent(name) +
					"&template=" +
					SEPAY_TEMPLATE +
					"&brid=" +
					SEPAY_BRID
				);
			}

			function showPayment(name) {
				document.getElementById("qrCodeImage").src = generateQRUrl(name);
				document.getElementById("paymentStatus").innerHTML =
					"‚è≥ Waiting for payment...";
				document.getElementById("paymentStatus").className =
					"payment-status status-waiting";
				document.getElementById("paymentSection").style.display = "block";
				document.getElementById("submitBtn").disabled = true;
				document.getElementById("submitBtn").innerHTML =
					'<span class="btn-icon">‚è≥</span> Awaiting Payment...';
				startPolling(name);
			}

			function cancelPayment() {
				stopPolling();
				document.getElementById("paymentSection").style.display = "none";
				document.getElementById("submitBtn").disabled = false;
				document.getElementById("submitBtn").innerHTML =
					'<span class="btn-icon">üí≥</span> Proceed to Payment';
			}

			function startPolling(name) {
				if (pollTimer) clearInterval(pollTimer);
				if (pollTimeoutTimer) clearTimeout(pollTimeoutTimer);
				pollStartTime = Date.now();
				pollTimeoutTimer = setTimeout(function () {
					stopPolling();
					document.getElementById("paymentStatus").innerHTML =
						"‚è∞ Payment timeout";
					document.getElementById("paymentStatus").className =
						"payment-status status-error";
					document.getElementById("submitBtn").disabled = false;
					document.getElementById("submitBtn").innerHTML =
						'<span class="btn-icon">üí≥</span> Proceed to Payment';
				}, POLL_TIMEOUT);

				pollTimer = setInterval(function () {
					var remaining = Math.max(
						0,
						POLL_TIMEOUT - (Date.now() - pollStartTime)
					);
					var m = Math.floor(remaining / 60000);
					var s = Math.floor((remaining % 60000) / 1000);
					document.getElementById("paymentStatus").innerHTML =
						"‚è≥ Waiting... (" + m + ":" + (s < 10 ? "0" : "") + s + ")";
					fetch(
						BACKEND_URL +
							"/api/payment/verify/" +
							encodeURIComponent(name) +
							"?min_amount=" +
							PAYMENT_AMOUNT,
						{
							headers: {
								Accept: "application/json",
							},
						}
					)
						.then(function (res) {
							return res.json();
						})
						.then(function (data) {
							if (data.verified) {
								stopPolling();
								document.getElementById("paymentStatus").innerHTML =
									"‚úÖ Payment confirmed!";
								document.getElementById("paymentStatus").className =
									"payment-status status-success";
								setTimeout(proceedGeneration, 1000);
							}
						})
						.catch(function (e) {
							console.error(e);
						});
				}, POLL_INTERVAL);
			}

			function stopPolling() {
				if (pollTimer) {
					clearInterval(pollTimer);
					pollTimer = null;
				}
				if (pollTimeoutTimer) {
					clearTimeout(pollTimeoutTimer);
					pollTimeoutTimer = null;
				}
			}

			// Form submit
			form.onsubmit = function (e) {
				e.preventDefault();
				console.log("Form submitted!");
				clearAllErrors();

				var name = document.getElementById("projectName").value.trim();
				var v = validateName(name);
				if (!v.ok) {
					showError("projectName", v.err);
					showMessage(v.err, "error");
					return false;
				}

				if (
					accumulatedImages.length < MIN_IMAGES ||
					accumulatedImages.length > MAX_IMAGES
				) {
					var err =
						"Upload " +
						MIN_IMAGES +
						"-" +
						MAX_IMAGES +
						" images (current: " +
						accumulatedImages.length +
						")";
					showError("bodyImages", err);
					showMessage(err, "error");
					return false;
				}

				for (var i = 0; i < accumulatedImages.length; i++) {
					var iv = validateImage(accumulatedImages[i]);
					if (!iv.ok) {
						showError("bodyImages", iv.err);
						showMessage(iv.err, "error");
						return false;
					}
				}

				// Validate YouTube URL if provided
				var youtubeUrl = document.getElementById("youtubeUrl").value.trim();
				if (youtubeUrl) {
					var yv = validateYouTubeUrl(youtubeUrl);
					if (!yv.ok) {
						showError("youtube", yv.err);
						showMessage(yv.err, "error");
						return false;
					}
				}

				document.getElementById("submitBtn").disabled = true;
				document.getElementById("submitBtn").innerHTML =
					'<span class="btn-icon">‚è≥</span> Validating...';

				var formData = new FormData(form);
				formData.delete("bodyImages");
				for (var j = 0; j < accumulatedImages.length; j++) {
					formData.append("bodyImage" + j, accumulatedImages[j]);
				}

				fetch(BACKEND_URL + "/api/validate", {
					method: "POST",
					body: formData,
					headers: {
						Accept: "application/json",
					},
				})
					.then(function (res) {
						return res.json().then(function (data) {
							return { ok: res.ok, data: data };
						});
					})
					.then(function (result) {
						if (!result.ok || !result.data.valid) {
							if (result.data.errors) {
								var keys = Object.keys(result.data.errors);
								for (var k = 0; k < keys.length; k++)
									showError(keys[k], result.data.errors[keys[k]]);
								showMessage(result.data.errors[keys[0]], "error");
							} else {
								showMessage(result.data.error || "Validation failed", "error");
							}
							document.getElementById("submitBtn").disabled = false;
							document.getElementById("submitBtn").innerHTML =
								'<span class="btn-icon">üí≥</span> Proceed to Payment';
							return;
						}

						return fetch(
							BACKEND_URL + "/api/project/check/" + encodeURIComponent(name),
							{
								headers: {
									Accept: "application/json",
								},
							}
						)
							.then(function (res) {
								return res.json();
							})
							.then(function (checkData) {
								if (checkData.exists) {
									showMessage(
										"Project already exists: " + checkData.url,
										"error"
									);
									document.getElementById("resultUrl").textContent =
										checkData.url;
									document.getElementById("resultSection").style.display =
										"block";
									document.getElementById("submitBtn").disabled = false;
									document.getElementById("submitBtn").innerHTML =
										'<span class="btn-icon">üí≥</span> Proceed to Payment';
									return;
								}
								document.getElementById("submitBtn").disabled = false;
								document.getElementById("submitBtn").innerHTML =
									'<span class="btn-icon">üí≥</span> Proceed to Payment';
								showPayment(name);
							});
					})
					.catch(function (err) {
						console.error("Error:", err);
						showMessage("Error: " + err.message, "error");
						document.getElementById("submitBtn").disabled = false;
						document.getElementById("submitBtn").innerHTML =
							'<span class="btn-icon">üí≥</span> Proceed to Payment';
					});

				return false;
			};

			function proceedGeneration() {
				var formData = new FormData(form);
				formData.set("deployTo", "s3");
				formData.delete("bodyImages");
				for (var i = 0; i < accumulatedImages.length; i++) {
					formData.append("bodyImage" + i, accumulatedImages[i]);
				}

				showMessage("Uploading...", "info");
				document.getElementById("progressSection").style.display = "block";
				document.getElementById("resultSection").style.display = "none";
				updateProgress(10);

				fetch(BACKEND_URL + "/api/generate", {
					method: "POST",
					body: formData,
					headers: {
						Accept: "application/json",
					},
				})
					.then(function (res) {
						return res.json().then(function (data) {
							return { ok: res.ok, data: data };
						});
					})
					.then(function (result) {
						if (result.ok && result.data.success) {
							updateProgress(100);
							showMessage(
								"‚úÖ Done in " + result.data.generationTime + "ms",
								"success"
							);
							document.getElementById("resultUrl").textContent =
								result.data.publicUrl;
							document.getElementById("resultSection").style.display = "block";
							document.getElementById("paymentSection").style.display = "none";
							document.getElementById("submitBtn").disabled = false;
							document.getElementById("submitBtn").innerHTML =
								'<span class="btn-icon">üí≥</span> Proceed to Payment';
							// Show success modal popup
							showSuccessModal(result.data.publicUrl);
						} else {
							updateProgress(0);
							if (result.data.errors) {
								var keys = Object.keys(result.data.errors);
								for (var k = 0; k < keys.length; k++)
									showError(keys[k], result.data.errors[keys[k]]);
								showMessage(result.data.errors[keys[0]], "error");
							} else {
								showMessage(result.data.error || "Generation failed", "error");
							}
						}
					})
					.catch(function (err) {
						updateProgress(0);
						showMessage("Upload failed: " + err.message, "error");
					});
			}

			function copyUrl() {
				navigator.clipboard.writeText(
					document.getElementById("resultUrl").textContent
				);
				alert("URL copied!");
			}

			function showSuccessModal(url) {
				document.getElementById("modalResultUrl").textContent = url;
				document.getElementById("successModal").style.display = "flex";
			}

			function closeSuccessModal() {
				document.getElementById("successModal").style.display = "none";
			}

			function copyModalUrl() {
				var url = document.getElementById("modalResultUrl").textContent;
				navigator.clipboard.writeText(url);
				var btn = document.querySelector(".btn-copy-modal");
				var originalText = btn.innerHTML;
				btn.innerHTML = "‚úÖ Copied!";
				setTimeout(function () {
					btn.innerHTML = originalText;
				}, 2000);
			}

			function visitUrl() {
				var url = document.getElementById("modalResultUrl").textContent;
				window.open(url, "_blank");
			}

			function resetForm() {
				form.reset();
				accumulatedImages = [];
				renderPreviews();
				document.getElementById("musicPreview").innerHTML = "";
				clearAllErrors();
				document.getElementById("progressSection").style.display = "none";
				document.getElementById("resultSection").style.display = "none";
				document.getElementById("paymentSection").style.display = "none";
				document.getElementById("successModal").style.display = "none";
				document.getElementById("existingDomainModal").style.display = "none";
				document.getElementById("domainPreview").style.display = "none";
				document.getElementById("remainingForm").style.display = "none";
				var opts = document.querySelectorAll(".tree-option");
				for (var i = 0; i < opts.length; i++) {
					if (i === 0) {
						opts[i].classList.add("selected");
						opts[i].querySelector("input").checked = true;
					} else {
						opts[i].classList.remove("selected");
					}
				}
			}
		</script>

		<!-- Facebook Support Link -->
		<a href="https://www.facebook.com/watashijotaro" target="_blank" class="fb-support-link" title="Contact Support">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
				<path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
			</svg>
			<span>Support</span>
		</a>

		<style>
			.fb-support-link {
				position: fixed;
				bottom: 20px;
				right: 20px;
				display: flex;
				align-items: center;
				gap: 8px;
				padding: 12px 18px;
				background: linear-gradient(135deg, #1877f2 0%, #0d65d9 100%);
				color: #fff;
				text-decoration: none;
				border-radius: 50px;
				font-size: 0.9rem;
				font-weight: 600;
				box-shadow: 0 4px 20px rgba(24, 119, 242, 0.4);
				transition: all 0.3s ease;
				z-index: 999;
			}
			.fb-support-link:hover {
				transform: translateY(-3px);
				box-shadow: 0 6px 25px rgba(24, 119, 242, 0.5);
			}
			.fb-support-link svg {
				width: 20px;
				height: 20px;
			}
			@media (max-width: 480px) {
				.fb-support-link {
					padding: 10px 14px;
					font-size: 0.8rem;
					bottom: 15px;
					right: 15px;
				}
				.fb-support-link svg {
					width: 18px;
					height: 18px;
				}
			}
		</style>
	</body>
</html>
